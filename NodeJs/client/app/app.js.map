{"version":3,"sources":["client/app/app.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["//import jQuery = require(\"jquery\");\r\n//import agGrid = require(\"ag-grid\");\r\n\r\n\r\nfunction alertCellRender(params)\r\n{\r\n    let t : string;\r\n    if (params.data.data.S[params.slide])\r\n    {\r\n         t =  '<div style=\"height:24px;width:24px;margin:0 auto;\"><svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" viewBox=\"59 19 157 157\" enable-background=\"new 58.954 18.776 157 157\" xml:space=\"preserve\"><g><path fill=\"#BE202E\" stroke=\"#FFFFFF\" stroke-width=\"1\" d=\"M181 115c-4 0-6-3-6-7l0-40c0-4 3-6 7-6 3 0 6 3 6 7l0 40C187 112 184 115 181 115zM180 137c-4 0-6-3-6-7 0-3 3-7 7-7 3 0 7 3 6 7C187 134 184 137 180 137z\"/><set id=\"show\" attributeName=\"visibility\" attributeType=\"CSS\" to=\"visible\" begin=\"0s; hide.end\" dur=\"0.7s\" fill=\"freeze\"/><set id=\"hide\" attributeName=\"visibility\" attributeType=\"CSS\" to=\"hidden\" begin=\"show.end\" dur=\"0.3s\" fill=\"freeze\"/></g><path fill=\"#231F20\" d=\"M88 64L107 43c1-1 2-1 2-1h41c6 0 10 5 10 10v90c0 6-5 10-10 10H98c-6 0-10-5-10-10V66C87 65 87 64 88 64zM94 142c0 2 2 4 4 4h53c2 0 4-2 4-4V52c0-2-2-4-4-4h-40L94 67l0 0V142zM138 129c0 2-1 3-3 3h-23c-2 0-3-1-3-3v-23c0-2 1-3 3-3h23c2 0 3 1 3 3V129zM138 93c0 2-1 3-3 3h-23c-2 0-3-1-3-3V70c0-2 1-3 3-3h23c2 0 3 1 3 3V93z\"/></svg></div>';\r\n    }\r\n    else\r\n    { \r\n        t =  '<div style=\"background:'+ ((params.data.data.S[ params.alert]) ? '#cf0404' : '#91e842') + ';height:9px;width:9px;display:inline-block;vertical-align:middle\"></div> ';\r\n        if (params.value)\r\n        {\r\n            t = t + params.value;\r\n        } \r\n        else\r\n        {\r\n            t = \"---\";\r\n        }\r\n    } \r\n    return t;\r\n}\r\nvar columnDefs = [\r\n\r\n    {headerName: \"Date\", field: \"TS\", cellRenderer: function (params) {   \r\n           return new Date(params.value * 1000).toLocaleTimeString();\r\n    }},\r\n    {headerName: \"Name\", field: \"name\", cellRenderer: 'group'}, \r\n    {headerName: \"Type\", field: \"type\", \r\n        cellRenderer: function (params) {   \r\n            switch(params.value)\r\n            {\r\n                case 1:\r\n                    return \"Home\";\r\n                case 2:\r\n                    return \"Pond\";\r\n                case 3:\r\n                    return \"Reef\";\r\n            }\r\n    }}, \r\n    {headerName: \"In Water\", field: \"data.S.W\", \r\n        cellRenderer: function (params) {   \r\n            return ((params.value) ? '<div style=\"background:lightblue;height:9px;width:9px;\"></div>':'<div style=\"border:1px solid black;height:9px;width:9px;\"></div>');\r\n    }}, \r\n    {headerName: \"T\", field: \"data.T\",  cellRenderer: alertCellRender,\r\n         cellRendererParams : {\r\n            alert: 'T'\r\n    } }, \r\n    {headerName: \"pH\", field: \"data.P\",  cellRenderer: alertCellRender,\r\n         cellRendererParams : {\r\n            alert: 'P',\r\n            slide: 'S'\r\n    } },  \r\n    {headerName: \"NH3\", field: \"data.N\",  cellRenderer: alertCellRender,\r\n         cellRendererParams : {\r\n            alert: 'N',\r\n            slide: 'S'\r\n    } },  \r\n    {headerName: \"Par\", field: \"data.A\"}, \r\n    {headerName: \"Lux\", field: \"data.L\"}, \r\n    {headerName: \"Kelvin\", field: \"data.K\"}, \r\n]; \r\n  \r\n(function ( $ ) {\r\n\r\n\r\n    let webSocket;\r\n    let grid;\r\n    let gridOptions = { \r\n        columnDefs: columnDefs, \r\n        rowData: [] \r\n    };\r\n    function handleOpenWs()\r\n    {\r\n        $(\"#Vc\").removeClass(\"s1 s2 s3\").addClass(\"s1\"); \r\n    }\r\n    function handleCloseWs()\r\n    {\r\n        $(\"#Vc\").removeClass(\"s1 s2 s3\").addClass(\"s3\");\r\n    }\r\n    function handleMessage(e)\r\n    { \r\n        gridOptions.api.setRowData(JSON.parse(e.data));\r\n        gridOptions.api.sizeColumnsToFit(); \r\n    } \r\n    $(document).ready(function () {\r\n\r\n        this.webSocket = new WebSocket(\"ws://\" + window.location.hostname + \":8001\"); \r\n        this.webSocket.onmessage = handleMessage;\r\n        this.webSocket.onopen = handleOpenWs;\r\n        this.webSocket.onclose = handleCloseWs;\r\n\r\n        grid = new agGrid.Grid($(\"#Vb\")[0], gridOptions);\r\n    });\r\n\r\n    return this;\r\n}( jQuery ));\r\n "],"sourceRoot":"c:\\xseneyex\\LocalDataExchange\\NodeJs"}